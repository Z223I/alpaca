# Dynamic Directory Structure Dependencies

This document lists scripts that **dynamically** interact with the backtesting directory structure `runs/{date}/{symbol}/run_*`.

## Scripts That Create/Modify Directory Structure

### 1. `code/backtesting.py`
**Dynamic Operations**:
- **Creates**: `runs/{date}/{symbol}/run_{date}_tf{timeframe}_th{threshold}_{uuid}` directories
- **Moves**: `./runs/current` → target run directory after completion
- **Updates**: Configuration files to point to current run directory

### 2. `code/alpaca.py --plot`
**Dynamic Operations**:
- **Reads**: Current plots directory from configuration (`get_plots_root_dir()`)
- **Creates**: Chart files in `{run_directory}/plots/{date}/`
- **Called**: During backtesting with `--plot --symbol {symbol} --date {date}`

## Scripts That Scan/Read Directory Structure

### 3. `code/analyze_backtesting_results.py`
**Dynamic Operations**:
- **Scans**: `runs/{date}/{symbol}/run_*` directories using `runs_dir.glob("2025-*")`
- **Reads**: Alert data from `historical_data/**/superduper_alerts_sent/**/*.json`
- **Extracts**: Parameters from directory names using regex patterns

### 4. `regenerate_summary_charts.py`
**Dynamic Operations**:
- **Scans**: `runs/{date}/{symbol}/run_*` directories using `runs_dir.glob("2025-*")`
- **Reads**: Alert and trade data from run directories
- **Generates**: Summary charts in `runs/` directory

## Configuration Scripts (Dynamic Updates)

### 5. `atoms/alerts/config.py` & `atoms/alerts/config_current_run.py`
**Dynamic Operations**:
- **Modified**: By `backtesting.py` during runs to update directory paths
- **Provides**: Root directory configuration that other scripts read dynamically

## Current Dynamic Directory Pattern

```
runs/
├── {date}/                    # Dynamically scanned by date glob
│   └── {symbol}/             # Dynamically scanned for symbols
│       └── run_{params}_{uuid}/  # Dynamically created/read
│           ├── data/         # Files created during runs
│           ├── historical_data/  # Alert data read by analyzers
│           ├── logs/         # Process logs
│           └── plots/        # Charts created by alpaca.py --plot
├── analysis_*.png            # Generated by analyzer
└── summary_*.png            # Generated by regenerate script
```

## Key Dynamic Patterns

1. **Directory Creation**: `backtesting.py` creates nested structure dynamically
2. **Directory Scanning**: Analysis scripts use `glob("2025-*")` to find date directories
3. **Configuration Updates**: Config files updated dynamically during backtesting
4. **Plot Generation**: `alpaca.py --plot` reads config and creates charts dynamically
5. **Data Reading**: Scripts read alert/trade data from completed run directories